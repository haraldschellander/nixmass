<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>SWE modeling from daily snow depth differences — swe.delta.snow • nixmass</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="SWE modeling from daily snow depth differences — swe.delta.snow"><meta name="description" content="Model daily values of Snow Water Equivalent solely from daily differences of snow depth.
swe.delta.snow computes SWE solely from daily changes of snow depth
at an observation site.
Compression of a snow layer without additional load on top is computed on
the basis of Sturm and Holmgren (1998), who regard snow as a viscous fluid:
$$\rho_i(t_{i+1}) = \rho_i(t_i)*(1+(SWE*g)/\eta_0 * exp^{-k_2*\rho_i(t_i)})$$
with \(\rho_i(t_{i+1}) and \rho_i(t_i)\) being tomorrow's and today's
respective density of layer i, the gravitational acceleration
\(g = 9.8ms^{-2}\), viscosity \(\eta_0\) (Pa) and
factor \(k2 [m^3kg^{-1}\)], determining the importance
of today's for tomorrow's density."><meta property="og:description" content="Model daily values of Snow Water Equivalent solely from daily differences of snow depth.
swe.delta.snow computes SWE solely from daily changes of snow depth
at an observation site.
Compression of a snow layer without additional load on top is computed on
the basis of Sturm and Holmgren (1998), who regard snow as a viscous fluid:
$$\rho_i(t_{i+1}) = \rho_i(t_i)*(1+(SWE*g)/\eta_0 * exp^{-k_2*\rho_i(t_i)})$$
with \(\rho_i(t_{i+1}) and \rho_i(t_i)\) being tomorrow's and today's
respective density of layer i, the gravitational acceleration
\(g = 9.8ms^{-2}\), viscosity \(\eta_0\) (Pa) and
factor \(k2 [m^3kg^{-1}\)], determining the importance
of today's for tomorrow's density."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nixmass</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>SWE modeling from daily snow depth differences</h1>

      <div class="d-none name"><code>swe.delta.snow.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Model daily values of Snow Water Equivalent solely from daily differences of snow depth.</p>
<p><code>swe.delta.snow</code> computes SWE solely from daily changes of snow depth
at an observation site. <br>
Compression of a snow layer without additional load on top is computed on
the basis of Sturm and Holmgren (1998), who regard snow as a viscous fluid: <br>
$$\rho_i(t_{i+1}) = \rho_i(t_i)*(1+(SWE*g)/\eta_0 * exp^{-k_2*\rho_i(t_i)})$$
with \(\rho_i(t_{i+1}) and \rho_i(t_i)\) being tomorrow's and today's
respective density of layer i, the gravitational acceleration
\(g = 9.8ms^{-2}\), viscosity \(\eta_0\) (Pa) and
factor \(k2 [m^3kg^{-1}\)], determining the importance
of today's for tomorrow's density.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">swe.delta.snow</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  model_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  dyn_rho_max <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  layers <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data.frame with at least two columns named <code>date</code> and <code>hs</code>.
They should contain date and corresponding daily observations of snow depth \(hs \ge 0\)
measured at one site. The unit must be meters (m). No gaps or NA are allowed.
Dates must be either of class <code>character</code>, <code>Date</code> or <code>POSIXct</code> and given in the format
<code>YYYY-MM-DD</code>. No sub-daily resolution is allowed at the moment (see details).
Note that hs has to start with zero.</p></dd>


<dt id="arg-model-opts">model_opts<a class="anchor" aria-label="anchor" href="#arg-model-opts"></a></dt>
<dd><p>An empty list which can be populated with model coefficients
specific to the original delta.snow model (Winkler et al., 2021) or a version, where
the maximum layer and bulk snow densities are allowed to vary with age (see details).</p></dd>


<dt id="arg-dyn-rho-max">dyn_rho_max<a class="anchor" aria-label="anchor" href="#arg-dyn-rho-max"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, the maximum bulk snow density is allowed to vary with layer age (see details).
if <code>FALSE</code>, the original delta.snow model is used.</p></dd>


<dt id="arg-layers">layers<a class="anchor" aria-label="anchor" href="#arg-layers"></a></dt>
<dd><p>Should parameters snow depth, swe and age be returned layerwise? Can be <code>TRUE</code> or <code>FALSE</code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Should additional information be given during runtime? Can be <code>TRUE</code> or <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>layears = FAlSE</code>, a vector with daily SWE values in mm. If <code>layers=TRUE</code>, a list with layerwise matrices
of the parameters h (snow depth), swe and age is returned additionally to the SWE vector. The matrix holds <code>dates</code> on the x-axis and
<code>layers</code> on the y-axis. swe is in mm, h in m and age in days.
I</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If <code>dyn_rho_max=TRUE</code>, the bulk snow density varies with layer age. As activation function,
<code>atan</code> is used, where the S-curve symmetrically transitions from the lower to the upper density bound.
In that case, <code>model_opts</code> are extended by a lower density bound <code>rho_l</code>,
an upper density bound <code>rho_h</code>, a slope <code>sigma</code> and a midpoint <code>mu</code>,
which have been found via an optimization procedure (Winkler et al., 2021).
Be aware that also the other model coefficients do slightly change.</p>
<p>The following model coefficients must be provided:</p>
<p><code>dyn_rho_max=FALSE</code>:</p><ul><li><p><code>rho.max</code> Maximum density of an individual snow layer produced by
the delta.snow model (kg/m3), \(rho.max &gt; 0\)</p></li>
<li><p><code>rho.null</code> Fresh snow density for a newly created layer (kg/m3), \(rho.null &gt; 0\).
Currently optimized for daily snow depth observations.</p></li>
<li><p><code>c.ov</code> Overburden factor due to fresh snow (-), \(c.ov &gt; 0\)</p></li>
<li><p><code>k.ov</code> Defines the impact of the individual layer density on the
compaction due to overburden (-), \(k.ov \in [0,1]\).</p></li>
<li><p><code>k</code> Exponent of the exponential-law compaction (m3/kg), \(k &gt; 0\).</p></li>
<li><p><code>tau</code> Uncertainty bound (m), \(tau &gt; 0\).</p></li>
<li><p><code>eta.null</code> Effective compactive viscosity of snow for "zero-density" (Pa s).</p></li>
<li><p><code>timestep</code> Timestep between snow depth observations in hours. Default is 24 hours, i.e. daily snow depth observations.
No sub-daily values are allowed at the moment (see details).</p></li>
</ul><p><code>dy_rho_max=TRUE</code>:</p>
<p>Instead of a constant coefficient for <code>rho.max</code>, these four
parameters describe the smooth S-curve approximated by the <code>atan</code> trigonometric function.</p><ul><li><p><code>sigma</code> Steepness or slope of <code>atan</code> at its midpoint <code>mu</code>, (-), \(sigma &gt; 0\).</p></li>
<li><p><code>mu</code> Central midpoint in days, where the steepest transition occurs (days), \(mu &gt; 0\).</p></li>
<li><p><code>rho_h</code> Upper density bound for a single layer and the whole snow pack (kg/m3), \(rho_h &gt; 0\).</p></li>
<li><p><code>rho_l</code> Lower density bound for a single layer and the whole snow pack, where the transition begins
(kg/m3), \(rho_l &gt; 0\).</p></li>
</ul><p>All other coefficients are needed as well. Be aware however that they are slightly different.</p>
<p>The easiest way to call the original delta.swe model is <code>swe.delta.snow(hsdata, dyn_rho_max = FALSE)</code>.
Note that parameters intrinsic to the dynamic density model provided with the original model
are silently ignored.</p>
<p>In principal, the model is able to cope with a sub-daily temporal resolution,
e.g. hourly snow depth observations. However, the model was fitted to daily observations,
and the model parameter <code>rho.null</code> reflects that. In other words, if the observation frequency changes,
<code>rho.null</code> should change as well. Currently, no sub-daily resolution is allowed.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Gruber, S. (2014) "Modelling snow water equivalent based on daily snow depths", Masterthesis, Institute for Atmospheric and Cryospheric Sciences, University of Innsbruck.
<br><br>
Martinec, J., Rango, A. (1991) "Indirect evaluation of snow reserves in mountain basins". Snow, Hydrology and Forests in High Alpine Areas. pp. 111-120.
<br><br>
Sturm, M., Holmgren, J. (1998) "Differences in compaction behavior of three climate classes of snow". Annals of Glaciology 26, 125-130.
<br><br>
Winkler, M., Schellander, H., and Gruber, S.: Snow water equivalents exclusively from snow depths and their temporal changes: the delta.snow model, Hydrol. Earth Syst. Sci., 25, 1165-1187, doi: 10.5194/hess-25-1165-2021, 2021.
<br><br>
Schroeder, M.et al. (2024) "CONTINUOUS SNOW WATER EQUIVALENT MONITORING ON GLACIERS USING COSMIC RAY NEUTRON SENSOR TECHNOLOGY A CASE STUDY ON HINTEREISFERNER, AUSTRIA", Proceedings: International Snow Science Workshop 2024, Tromsø, Norway, 1107 - 1114</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Harald Schellander, Michael Winkler</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">hsdata</span>, package <span class="op">=</span> <span class="st">"nixmass"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">swe_dyn</span> <span class="op">&lt;-</span> <span class="fu">swe.delta.snow</span><span class="op">(</span><span class="va">hsdata</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">swe</span> <span class="op">&lt;-</span> <span class="fu">swe.delta.snow</span><span class="op">(</span><span class="va">hsdata</span>, dyn_rho_max <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">hsdata</span><span class="op">$</span><span class="va">date</span><span class="op">)</span>, <span class="va">swe_dyn</span>, type <span class="op">=</span> <span class="st">"l"</span>, ylab <span class="op">=</span> <span class="st">"SWE (mm) / hs (cm)"</span>, xlab <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">hsdata</span><span class="op">$</span><span class="va">date</span><span class="op">)</span>, <span class="va">swe</span>, type <span class="op">=</span> <span class="st">"l"</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">hsdata</span><span class="op">$</span><span class="va">date</span><span class="op">)</span>, <span class="va">hsdata</span><span class="op">$</span><span class="va">hs</span> <span class="op">*</span> <span class="fl">100</span>, type <span class="op">=</span> <span class="st">"l"</span>, lty <span class="op">=</span> <span class="fl">2</span>, col <span class="op">=</span> <span class="st">"grey30"</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"delta.snow"</span>, <span class="st">"topleft"</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SWE dyn"</span>, <span class="st">"SWE"</span>, <span class="st">"HS"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span> col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"red"</span>, <span class="st">"grey30"</span><span class="op">)</span>, lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="swe.delta.snow-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Harald Schellander.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

